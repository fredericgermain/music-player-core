language: cpp

# do not test on ubuntu 12.04, using 14.04
dist: trusty

python:
  - "2.7" # this is the officially tested and supported one for now
  - "2.6"
  - "3.2"
  - "3.3"

matrix:
  allow_failures:
    # not tested at all yet:
    - python: 2.6
    - python: 3.2
    - python: 3.3

compiler:
  - clang
# No GCC atm because gcc 4.6 doesn't know about "--std=c++11" and I dont want
# to have extra handling just for GCC.

env:
  CFLAGS=-I/usr/local/include

install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libboost-all-dev
  - sudo apt-get install -y python-dev libsnappy-dev libtool
  - sudo apt-get install -y yasm libchromaprint-dev portaudio19-dev libboost-dev
  - sudo add-apt-repository -y ppa:mc3man/trusty-media
  - sudo apt-get -qq update
  - sudo apt-get install -y libavformat-dev libavresample-dev

script:
  - python setup.py build
  - sudo python setup.py install
  - python -c "import musicplayer as mp; p = mp.createPlayer()"
